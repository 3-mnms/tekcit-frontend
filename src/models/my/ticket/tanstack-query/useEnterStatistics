// src/models/my/tickket/tanstack-query/useEnterStatistics.ts
import { useQuery } from '@tanstack/react-query';
import { getEnterStatistics } from '@/shared/api/my/statistics';

/**
 * @param {string=} festivalId
 * @param {string=} performanceDateISO
 * @param {boolean=} enabled
 * @returns {import('@tanstack/react-query').UseQueryResult<import('@/shared/api/my/statistics').StatisticsQrCodeResponseDTO>}
 */
export function useEnterStatistics(festivalId, performanceDateISO, enabled) {
  const active = Boolean(enabled && festivalId && performanceDateISO);
  return useQuery({
    queryKey: ['statistics', 'enter', festivalId, performanceDateISO],
    queryFn: () => getEnterStatistics(festivalId, performanceDateISO),
    enabled: active,
    staleTime: 3000,
    refetchInterval: (q) => (q.state.data ? 5000 : false),
  });
}
